<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Dodex06 - Portfolio">
  <title>Dodex06 ‚Äì Portfolio + CatchMe</title>

  <!-- Styles g√©n√©raux -->
  <link rel="stylesheet" href="styles.css">

  <!-- Mode sombre existant -->
  <script src="js/dark-mode.js" defer></script>

  <!-- Leaflet (carte) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>

  <!-- Styles minimaux pour la barre & la carte (ind√©pendant de ton styles.css) -->
  <style>
    :root { --bar-h: 56px; }
    body { margin:0; font-family: system-ui, Arial, sans-serif; }
    header { padding:12px; border-bottom:1px solid #ddd; display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
    .links a { margin-right:12px; text-decoration:none; }
    .status-picker { display:flex; gap:8px; align-items:center; }
    .status-picker button { font-size:18px; padding:6px 10px; border:1px solid #ccc; background:#fff; border-radius:8px; }
    .status-picker button.active { border-color:#0070f3; box-shadow:0 0 0 2px rgba(0,112,243,.15); }
    #map { height: calc(60vh); width: 100vw; }
    .notice { margin:8px 12px; font-size:14px; opacity:.8; }
    .marker-emoji { font-size:24px; line-height:24px; }
    /* petit confort dark */
    :root[data-theme="dark"] header { border-color:#223; }
    :root[data-theme="dark"] .status-picker button { background:#0f1629; border-color:#334; color:#e8edf7; }
  </style>
</head>
<body class="no-js">

<header>
  <!-- Bouton mode sombre -->
  <div class="mode-toggle">
    <button id="theme-toggle" aria-pressed="false" aria-label="Basculer le th√®me">
      <span class="toggle-icon" aria-hidden="true">üåô</span>
      <span class="toggle-text">Th√®me</span>
    </button>
  </div>

  <!-- Navigation -->
  <nav class="links" aria-label="Liens principaux">
    <a href="#about"><span>√Ä propos</span></a>
    <a href="#projects"><span>Projets</span></a>
    <a href="#contact"><span>Contact</span></a>
  </nav>

  <!-- Choix d‚Äôactivit√© (CatchMe) -->
  <div class="status-picker" aria-label="Choisir une activit√©">
    <strong>Je suis :</strong>
    <button data-ico="üçî" title="Manger">üçî</button>
    <button data-ico="üçª" title="Boire">üçª</button>
    <button data-ico="‚öΩ"  title="Match">‚öΩ</button>
    <button data-ico="üéâ"  title="Soir√©e">üéâ</button>
    <button data-ico="üí¨"  title="Discuter">üí¨</button>
  </div>
</header>

<!-- Carte -->
<div id="map"></div>
<p class="notice" id="notice">Choisis une ic√¥ne puis autorise la g√©olocalisation.</p>

<main id="content">
  <!-- Section √† propos -->
  <section id="about">
    <h1>Salut, moi c‚Äôest Dodex06</h1>
    <p>D√©veloppeur web passionn√©. J‚Äôaime cr√©er des interfaces simples, rapides et accessibles.</p>
  </section>

  <!-- Section projets -->
  <section id="projects">
    <h2>Projets r√©cents</h2>
    <ul>
      <li>
        <h3>Projet 1</h3>
        <p>Br√®ve description du projet (tech, r√¥le, r√©sultat).</p>
        <a href="#">Voir</a>
      </li>
      <li>
        <h3>Projet 2</h3>
        <p>Br√®ve description du projet.</p>
        <a href="#">Voir</a>
      </li>
    </ul>
  </section>

  <!-- Section contact -->
  <section id="contact">
    <h2>Contact</h2>
    <ul>
      <li>E-mail : <a href="mailto:tadresse@mail.com">tadresse@mail.com</a></li>
      <li>GitHub : <a href="https://github.com/Dodex06">@Dodex06</a></li>
      <li>LinkedIn : <a href="#">Ton LinkedIn</a></li>
    </ul>
  </section>
</main>

<!-- Script CatchMe (carte + g√©oloc + ic√¥ne) -->
<script>
let map, meMarker;
let currentIcon = "üçî"; // par d√©faut

document.addEventListener('DOMContentLoaded', () => {
  // activer le 1er bouton et g√©rer les clics
  const buttons = document.querySelectorAll('.status-picker button[data-ico]');
  buttons.forEach((btn, i) => {
    if (i === 0) btn.classList.add('active');
    btn.addEventListener('click', () => {
      buttons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentIcon = btn.dataset.ico;
      if (meMarker) meMarker.setIcon(emojiIcon(currentIcon));
      if (meMarker) meMarker.setPopupContent("Moi : " + currentIcon);
    });
  });

  initMap();
  locateMe();
});

function initMap() {
  map = L.map('map').setView([48.8566, 2.3522], 13); // Paris par d√©faut
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '¬© OpenStreetMap'
  }).addTo(map);
}

function locateMe() {
  const notice = document.getElementById('notice');
  if (!navigator.geolocation) {
    notice.textContent = "La g√©olocalisation n'est pas disponible sur cet appareil.";
    return;
  }
  navigator.geolocation.getCurrentPosition(
    (pos) => {
      const { latitude, longitude } = pos.coords;
      map.setView([latitude, longitude], 16);
      meMarker = L.marker([latitude, longitude], { icon: emojiIcon(currentIcon) }).addTo(map);
      meMarker.bindPopup("Moi : " + currentIcon).openPopup();
      notice.textContent = "Position trouv√©e. Change l‚Äôic√¥ne en haut si tu veux.";
    },
    (err) => {
      notice.textContent = "Autorise la localisation pour te placer sur la carte.";
      console.warn(err);
    },
    { enableHighAccuracy: true, timeout: 10000 }
  );
}

function emojiIcon(emoji) {
  return L.divIcon({
    className: 'marker-emoji',
    html: emoji,
    iconSize: [24, 24],
    iconAnchor: [12, 12]
  });
}
</script>

</body>
</html>
